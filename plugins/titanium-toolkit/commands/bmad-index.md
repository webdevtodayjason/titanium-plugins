---
description: Generate BMAD story index summary
---

# BMAD Index - Generate Story Index

You are generating a STORY-INDEX.md file that summarizes all epics and user stories in the backlog. This provides a quick overview for sprint planning and progress tracking.

## Purpose

Create a summary table showing:
- Total epics, stories, and story points
- Epic overview with story counts
- Per-epic story details
- Priority distribution
- Development phases

## When to Use

- After `/bmad:start` completes (auto-generated)
- After adding new epic with `/bmad:epic`
- After manually editing epic files
- Want refreshed totals and summaries
- Planning sprints

## Process

### Step 1: Check for Epics

```bash
ls bmad-backlog/epics/EPIC-*.md 2>/dev/null || echo "No epics found"
```

**If no epics found**:
```
‚ùå No epic files found

Story index requires epic files to summarize.

Please generate epics first:
- Run: /bmad:epic 1
- Or: /bmad:start (complete workflow)
```

**If epics found**:
- Count epic files
- Continue

### Step 2: Generate Story Index

Use utility:

```bash
uv run {{PLUGIN_DIR}}/hooks/utils/bmad/bmad_generator.py index "bmad-backlog/epics/" "$(pwd)"
```

This scans all EPIC-*.md files and generates `bmad-backlog/STORY-INDEX.md`.

**What it extracts**:
- Epic numbers and names
- Story count per epic
- Story points (estimated or documented)
- Story IDs, titles, priorities
- Overall totals

### Step 3: Review Generated Index

Read the index:

```bash
Read bmad-backlog/STORY-INDEX.md
```

Present summary:

```
üìä Story Index Generated!

üìà Backlog Summary:
- Total Epics: {{N}}
- Total Stories: {{M}}
- Total Story Points: {{P}}

Epic Breakdown:
- Epic 1: {{name}} - {{X}} stories ({{Y}} points)
- Epic 2: {{name}} - {{X}} stories ({{Y}} points)
- Epic 3: {{name}} - {{X}} stories ({{Y}} points)
...

Priority Distribution:
- P0 (Must Have): {{X}} stories ({{%}})
- P1 (Should Have): {{Y}} stories ({{%}})
- P2 (Nice to Have): {{Z}} stories ({{%}})

üìÑ Location: bmad-backlog/STORY-INDEX.md

This index provides a quick overview of your entire backlog!
```

### Step 4: Show Sample from Index

Display excerpt from the generated index:

```markdown
Sample from index:

## Epic Overview

| Epic ID | Epic Name | Stories | Story Points | Status |
|---------|-----------|---------|--------------|--------|
| EPIC-001 | Foundation | {{X}} | {{Y}} | Not Started |
| EPIC-002 | Core Features | {{X}} | {{Y}} | Not Started |
...
```

### Step 5: Store in Pieces

```
mcp__Pieces__create_pieces_memory(
  summary_description: "Story index for {{project}}",
  summary: "Generated story index summary. Total: {{N}} epics, {{M}} stories, {{P}} story points. Epic breakdown: {{list each epic with counts}}. Priority distribution: {{P0 count}} must-have, {{P1 count}} should-have. Index useful for sprint planning and progress tracking.",
  files: [
    "bmad-backlog/STORY-INDEX.md",
    "list all epic files"
  ],
  project: "$(pwd)"
)
```

### Step 6: Suggest Next Steps

```
üí° Next Steps:

Use this index to:
1. Plan sprints (prioritize P0 stories)
2. Track progress (update status column)
3. Estimate timeline (total story points √∑ velocity)
4. Communicate with stakeholders

Ready to implement?

Run: /titanium:plan bmad-backlog/epics/EPIC-001-*.md
Then: /titanium:work
```

## Error Handling

### If No Epics Found

```
‚ùå No epic files found in bmad-backlog/epics/

Cannot generate index without epic files.

Please generate epics first:
- Run: /bmad:epic 1 (for single epic)
- Or: /bmad:start (for complete backlog)
```

### If Epic Files Malformed

```
‚ö†Ô∏è  Some epic files couldn't be parsed:
- {{filename}}: {{issue}}

The index was generated from parseable epics only.

Would you like me to fix the malformed epics? (yes/no)
```

## Voice Feedback

Voice announces:
- "Generating story index" (when starting)
- "Story index complete: {{N}} epics, {{M}} stories" (when done)

## Example Usage

**Example 1: After Epic Generation**
```
User: /bmad:epic 1
[Epic 1 generated]
User: /bmad:epic 2
[Epic 2 generated]
User: /bmad:index

Claude:
- Scans epics/
- Finds 2 epics
- Counts stories
- Generates index
- "Index complete: 2 epics, 18 stories, 75 story points"
```

**Example 2: After Manual Edits**
```
User: [Edits EPIC-003.md, adds more stories]
User: /bmad:index

Claude:
- Rescans all epics
- Updates totals
- "Index updated: 5 epics, 52 stories (was 45), 210 points (was 180)"
```

**Example 3: Sprint Planning**
```
User: /bmad:index

Claude:
- Generates index
- "Total: 148 stories, 634 points"
- "P0 stories: 98 (65%)"

User: "How many P0 stories in Epic 1?"
Claude: [Reads index] "Epic 1 has 12 P0 stories out of 15 total"
```

## Integration

**Auto-generated by**:
- `/bmad:start` (after all epics created)
- `/bmad:epic` (after each epic)

**Manually run**:
- After editing epic files
- Before sprint planning
- To refresh totals

**Used by**:
- Project managers for planning
- Developers for understanding scope
- Stakeholders for status updates

**Cost**: ~$0.01 (minimal - just parsing, no GPT-4 needed for index generation)

---

**This command provides the 30,000-foot view of your entire backlog!**
