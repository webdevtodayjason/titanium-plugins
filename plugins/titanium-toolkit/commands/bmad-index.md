---
description: Generate BMAD story index summary
---

# BMAD Index - Generate Story Index

Use the product-manager subagent to generate a STORY-INDEX.md file that summarizes all epics and user stories in the backlog. This provides a quick overview for sprint planning and progress tracking.

## Purpose

Create a summary table showing:
- Total epics, stories, and story points
- Epic overview with story counts
- Per-epic story details
- Priority distribution
- Development phases

## When to Use

- After `/bmad:start` completes (auto-generated)
- After adding new epic with `/bmad:epic`
- After manually editing epic files
- Want refreshed totals and summaries
- Planning sprints

## Task Delegation

First check that epics exist, then launch the product-manager subagent to handle the complete index generation workflow.

## Process

### Step 1: Check for Epics

```bash
ls bmad-backlog/epics/EPIC-*.md 2>/dev/null || echo "No epics found"
```

**If no epics found**:
```
‚ùå No epic files found

Story index requires epic files to summarize.

Please generate epics first:
- Run: /bmad:epic 1
- Or: /bmad:start (complete workflow)
```

Stop here - do not launch product-manager without epic files.

**If epics found**: Continue to Step 2.

### Step 2: Launch Product-Manager Subagent

Use the Task tool to launch the product-manager subagent in its own context window:

```
Task(
  description: "Generate BMAD story index",
  prompt: "Create comprehensive story index summarizing all epics and user stories.

Input:
- Epic files: bmad-backlog/epics/EPIC-*.md

Output:
- Story index: bmad-backlog/STORY-INDEX.md

Your workflow:

1. **Generate story index** using MCP tool:
   ```
   mcp__plugin_titanium-toolkit_tt__bmad_generator(
     doc_type: \"index\",
     input_path: \"bmad-backlog/epics/\",
     project_path: \"$(pwd)\"
   )
   ```

2. **Review generated index**:
   - Read bmad-backlog/STORY-INDEX.md
   - Extract totals (epics, stories, story points)
   - Extract epic breakdown
   - Extract priority distribution

3. **Present summary** with key metrics:
   - Total epics, stories, story points
   - Epic breakdown with story counts per epic
   - Priority distribution (P0/P1/P2 percentages)
   - Show sample from index (epic overview table)

4. **Run vibe-check** to validate index quality

5. **Store in Pieces** for future reference:
   - Include index file
   - Include all epic files
   - Summarize totals and breakdown

6. **Suggest next steps**:
   - Sprint planning guidance
   - Implementation readiness
   - Progress tracking tips

Follow your complete index workflow from the bmad-methodology skill.

Project path: $(pwd)",
  subagent_type: "product-manager"
)
```

The product-manager subagent will handle:
- Scanning all epic files
- Generating story index
- Extracting and presenting totals
- Validation (vibe-check)
- Pieces storage
- Summary presentation with next steps

### Step 3: Return Results

The product-manager will return a summary when complete. Present this to the user.

## What the Product-Manager Creates

The product-manager subagent generates `bmad-backlog/STORY-INDEX.md` containing:

- **Summary Statistics**: Total epics, stories, story points
- **Epic Overview Table**: Epic ID, name, story count, points, status
- **Per-Epic Story Details**: All stories with IDs, titles, priorities
- **Priority Distribution**: P0/P1/P2 breakdown with percentages
- **Development Phases**: Logical grouping of epics
- **Quick Reference**: Key metrics for sprint planning

## Error Handling

### If No Epics Found

Handled in Step 1 - command exits gracefully with helpful message.

### If Epic Files Malformed

The product-manager subagent will:
- Report which files couldn't be parsed
- Generate index from parseable epics only
- Offer to help fix malformed files

## Voice Feedback

Voice announces:
- "Generating story index" (when starting)
- "Story index complete: {{N}} epics, {{M}} stories" (when done)

## Example Usage

**Example 1: After Epic Generation**
```
User: /bmad:epic 1
[Epic 1 generated]
User: /bmad:epic 2
[Epic 2 generated]
User: /bmad:index

Product-Manager:
- Scans epics/
- Finds 2 epics
- Counts stories
- Generates index
- "Index complete: 2 epics, 18 stories, 75 story points"
```

**Example 2: After Manual Edits**
```
User: [Edits EPIC-003.md, adds more stories]
User: /bmad:index

Product-Manager:
- Rescans all epics
- Updates totals
- "Index updated: 5 epics, 52 stories (was 45), 210 points (was 180)"
```

**Example 3: Sprint Planning**
```
User: /bmad:index

Product-Manager:
- Generates index
- "Total: 148 stories, 634 points"
- "P0 stories: 98 (65%)"
```

## Integration

**Auto-generated by**:
- `/bmad:start` (after all epics created)
- `/bmad:epic` (after each epic)

**Manually run**:
- After editing epic files
- Before sprint planning
- To refresh totals

**Used by**:
- Project managers for planning
- Developers for understanding scope
- Stakeholders for status updates

## Cost

Typical cost: ~$0.01 (minimal - just parsing and formatting, using Claude Haiku 4.5)

---

**This command delegates to the product-manager subagent who creates the 30,000-foot view of your entire backlog!**
